<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Artist Dashboard â€“ ArtPath</title>
  <link rel="stylesheet" href="Artpath.css">
  <style>
    .dashboard-container {
      display: flex;
      min-height: 100vh;
      background: linear-gradient(180deg, #23243a 0%, #181a2a 100%);
    }
    .dashboard-sidebar {
      width: 220px;
      background: #181a2a;
      color: #a3a8c9;
      display: flex;
      flex-direction: column;
      padding: 40px 0 0 0;
      box-shadow: 2px 0 16px rgba(24,26,42,0.10);
      min-height: 100vh;
    }
    .dashboard-sidebar a {
      color: #a3a8c9;
      text-decoration: none;
      padding: 18px 32px;
      font-size: 1.08rem;
      font-weight: 500;
      transition: background 0.2s, color 0.2s;
    }
    .dashboard-sidebar a:hover, .dashboard-sidebar a.active {
      background: #23243a;
      color: #fff;
    }
    .dashboard-main {
      flex: 1;
      padding: 60px 40px 40px 40px;
      color: #e3e6f3;
      display: flex;
      flex-direction: column;
      gap: 32px;
    }
    .dashboard-welcome {
      font-size: 2.2rem;
      font-weight: 700;
      margin-bottom: 18px;
    }
    .dashboard-actions {
      display: flex;
      gap: 18px;
      margin-bottom: 24px;
    }
    .dashboard-actions button {
      background: #0600AB;
      color: #fff;
      font-size: 1.08rem;
      font-weight: 600;
      padding: 12px 28px;
      border: none;
      border-radius: 8px;
      box-shadow: 0 0 12px 2px rgba(6,0,171,0.12);
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s;
    }
    .dashboard-actions button:hover {
      background: #00033D;
      box-shadow: 0 0 24px 4px rgba(6,0,171,0.18);
    }
    .dashboard-section {
      background: #23243a;
      border-radius: 12px;
      padding: 32px 24px;
      margin-bottom: 18px;
      box-shadow: 0 2px 12px rgba(24,26,42,0.10);
    }
    .dashboard-section h3 {
      margin-top: 0;
      color: #a3a8c9;
      font-size: 1.3rem;
      margin-bottom: 18px;
    }
    .highlight {
      font-weight: 800;
      letter-spacing: 1px;
      background: linear-gradient(90deg, #0600AB 0%, #00033D 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .messages-section {
      padding: 0;
    }
    .messages-container {
      display: flex;
      background: #181a2a;
      border-radius: 10px;
      box-shadow: 0 2px 12px rgba(24,26,42,0.10);
      overflow: hidden;
      min-height: 320px;
    }
    .conversation-list {
      width: 180px;
      background: #23243a;
      border-right: 1.5px solid #2e3150;
      display: flex;
      flex-direction: column;
    }
    .conversation {
      padding: 18px 16px;
      color: #a3a8c9;
      cursor: pointer;
      border-bottom: 1px solid #181a2a;
      transition: background 0.2s, color 0.2s;
    }
    .conversation.active, .conversation:hover {
      background: #0600AB;
      color: #fff;
    }
    .chat-window {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 18px 18px 12px 18px;
    }
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .message {
      max-width: 70%;
      padding: 10px 16px;
      border-radius: 16px;
      font-size: 1.01rem;
      line-height: 1.5;
      margin-bottom: 2px;
    }
    .from-them {
      background: #23243a;
      color: #a3a8c9;
      align-self: flex-start;
    }
    .from-me {
      background: #0600AB;
      color: #fff;
      align-self: flex-end;
    }
    .chat-input-row {
      display: flex;
      gap: 8px;
    }
    .chat-input {
      flex: 1;
      padding: 10px 14px;
      border-radius: 8px;
      border: 1px solid #2e3150;
      background: #23243a;
      color: #fff;
      font-size: 1rem;
      outline: none;
    }
    .chat-send-btn {
      background: #0600AB;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 10px 22px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }
    .chat-send-btn:hover {
      background: #00033D;
    }
    .commissions-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      background: #181a2a;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(24,26,42,0.10);
    }
    .commissions-table th, .commissions-table td {
      padding: 14px 10px;
      text-align: left;
      color: #e3e6f3;
    }
    .commissions-table th {
      background: #23243a;
      color: #a3a8c9;
      font-weight: 700;
    }
    .commissions-table tr:not(:last-child) {
      border-bottom: 1px solid #2e3150;
    }
    .status {
      padding: 4px 12px;
      border-radius: 8px;
      font-size: 0.98rem;
      font-weight: 600;
    }
    .status.pending {
      background: #0600AB;
      color: #fff;
    }
    .status.accepted {
      background: #1bbf6b;
      color: #fff;
    }
    .status.declined {
      background: #c0392b;
      color: #fff;
    }
    .accept-btn, .decline-btn {
      padding: 7px 16px;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      margin-right: 6px;
      cursor: pointer;
      font-size: 0.98rem;
      transition: background 0.2s, color 0.2s;
    }
    .accept-btn {
      background: #1bbf6b;
      color: #fff;
    }
    .accept-btn:disabled {
      background: #1bbf6b99;
      color: #fff;
      cursor: not-allowed;
    }
    .decline-btn {
      background: #c0392b;
      color: #fff;
    }
    .decline-btn:disabled {
      background: #c0392b99;
      color: #fff;
      cursor: not-allowed;
    }
    .profile-section {
      background: #23243a;
      border-radius: 12px;
      padding: 32px 24px;
      margin-bottom: 18px;
      box-shadow: 0 2px 12px rgba(24,26,42,0.10);
    }
    .profile-avatar-row {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
    }
    .profile-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #0600AB;
    }
    .profile-form-group {
      margin-bottom: 18px;
    }
    .profile-form-group label {
      display: block;
      font-size: 0.95rem;
      color: #a3a8c9;
      margin-bottom: 8px;
    }
    .profile-form-group input,
    .profile-form-group textarea {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #2e3150;
      border-radius: 8px;
      background: #23243a;
      color: #fff;
      font-size: 1rem;
      outline: none;
    }
    .profile-form-group input:focus,
    .profile-form-group textarea:focus {
      border-color: #0600AB;
    }
    .profile-form-group button {
      background: #0600AB;
      color: #fff;
      font-size: 1.08rem;
      font-weight: 600;
      padding: 12px 28px;
      border: none;
      border-radius: 8px;
      box-shadow: 0 0 12px 2px rgba(6,0,171,0.12);
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s;
    }
    .profile-form-group button:hover {
      background: #00033D;
      box-shadow: 0 0 24px 4px rgba(6,0,171,0.18);
    }
    .profile-form-group button:disabled {
      background: #0600AB99;
      color: #fff;
      cursor: not-allowed;
    }
    .earnings-section {
      background: #23243a;
      border-radius: 12px;
      padding: 32px 24px;
      margin-bottom: 18px;
      box-shadow: 0 2px 12px rgba(24,26,42,0.10);
    }
    .earnings-summary {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #2e3150;
    }
    .earnings-total-label {
      font-size: 1.1rem;
      color: #a3a8c9;
    }
    .earnings-total {
      font-size: 1.8rem;
      font-weight: 700;
      color: #1bbf6b;
    }
    .earnings-table {
      width: 100%;
      border-collapse: collapse;
      background: #181a2a;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(24,26,42,0.10);
    }
    .earnings-table th, .earnings-table td {
      padding: 14px 10px;
      text-align: left;
      color: #e3e6f3;
    }
    .earnings-table th {
      background: #23243a;
      color: #a3a8c9;
      font-weight: 700;
    }
    .earnings-table tr:not(:last-child) {
      border-bottom: 1px solid #2e3150;
    }
    @media (max-width: 900px) {
      .dashboard-container { flex-direction: column; }
      .dashboard-sidebar { width: 100%; flex-direction: row; padding: 0; }
      .dashboard-sidebar a { flex: 1; text-align: center; padding: 16px 0; }
      .dashboard-main { padding: 32px 8px; }
      .messages-container { flex-direction: column; }
      .conversation-list { width: 100%; flex-direction: row; border-right: none; border-bottom: 1.5px solid #2e3150; }
      .conversation { flex: 1; text-align: center; border-bottom: none; border-right: 1px solid #181a2a; }
    }
  </style>
</head>
<body>
  <!-- Auth Modal -->
  <div id="authModal" class="modal hidden">
    <div class="modal-content">
      <div class="auth-tabs">
        <button id="showLoginTab" class="auth-tab active">Login</button>
        <button id="showRegisterTab" class="auth-tab">Register</button>
      </div>
      <div id="authMessage" class="auth-message"></div>
      <form id="loginForm" class="auth-form">
        <input type="text" id="loginName" placeholder="Name" required />
        <input type="password" id="loginPassword" placeholder="Password" required />
        <button type="submit">Login</button>
      </form>
      <form id="registerForm" class="auth-form hidden">
        <input type="text" id="registerName" placeholder="Name" required />
        <input type="email" id="registerEmail" placeholder="Email" required />
        <input type="password" id="registerPassword" placeholder="Password (min 6 chars)" required />
        <button type="submit">Register</button>
      </form>
      <button class="close-modal" id="closeAuthModal">Ã—</button>
    </div>
  </div>

  <header class="navbar sticky-navbar">
    <div class="logo">ArtPath</div>
    <nav class="main-nav" id="mainNav">
      <a href="artist_dashboard.html" class="main-nav-link protected-link">My Studio</a>
      <a href="client_dashboard.html" class="main-nav-link protected-link">Find Artists</a>
      <a href="artist_page.html" class="main-nav-link protected-link">Spotlight</a>
    </nav>
    <div id="authArea">
      <button id="openAuthModal" class="menu-toggle">Login / Register</button>
    </div>
    <button class="menu-toggle" onclick="toggleSidebar()">â˜° Menu</button>
  </header>

  <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>
  <div class="sidebar" id="sidebar">
    <button class="close-sidebar" onclick="closeSidebar()">Ã—</button>
    <a href="#" id="sidebarAuthLink">Login / Register</a>
    <a href="artist_dashboard.html" class="protected-link">My Studio</a>
    <a href="client_dashboard.html" class="protected-link">Find Artists</a>
    <a href="artist_page.html" class="protected-link">Spotlight</a>
    <a href="#">Home</a>
    <a href="#">Settings</a>
    <a href="#">Learn</a>
    <a href="#">Portfolio</a>
  </div>
  <!-- Upload Art Modal -->
  <div id="uploadArtModal" class="modal hidden">
    <div class="modal-content">
      <button class="close-modal" id="closeUploadArtModal">Ã—</button>
      <h2 class="highlight">Upload Artwork</h2>
      <form id="uploadArtForm">
        <input type="file" id="artImage" accept="image/*" required />
        <input type="text" id="artTitle" placeholder="Title" required />
        <textarea id="artDesc" placeholder="Description" rows="3" required></textarea>
        <button type="submit">Upload</button>
      </form>
      <div id="uploadArtMsg" class="auth-message"></div>
    </div>
  </div>
  <div class="dashboard-container">
    <nav class="dashboard-sidebar">
      <a href="#" class="active">Portfolio</a>
      <a href="#">Commissions</a>
      <a href="#">Messages</a>
      <a href="#">Settings</a>
    </nav>
    <main class="dashboard-main">
      <div class="dashboard-welcome highlight">Welcome, [Name]</div>
      <div class="dashboard-actions">
        <button id="openUploadArtModal">Upload Art</button>
        <button>Set Up Profile</button>
        <button>View My Page</button>
      </div>
      <div class="dashboard-section">
        <h3 class="highlight">Commission Requests</h3>
        <table class="commissions-table">
          <thead>
            <tr>
              <th>Client</th>
              <th>Type</th>
              <th>Price</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Jamie</td>
              <td>Portrait</td>
              <td>$100</td>
              <td><span class="status pending">Pending</span></td>
              <td>
                <button class="accept-btn">Accept</button>
                <button class="decline-btn">Decline</button>
              </td>
            </tr>
            <tr>
              <td>Morgan</td>
              <td>Landscape</td>
              <td>$200</td>
              <td><span class="status accepted">Accepted</span></td>
              <td>
                <button class="accept-btn" disabled>Accept</button>
                <button class="decline-btn" disabled>Decline</button>
              </td>
            </tr>
            <tr>
              <td>Taylor</td>
              <td>Anime Style</td>
              <td>$80</td>
              <td><span class="status declined">Declined</span></td>
              <td>
                <button class="accept-btn" disabled>Accept</button>
                <button class="decline-btn" disabled>Decline</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="dashboard-section">
        <h3 class="highlight">My Portfolio</h3>
        <div id="portfolioGrid" class="art-grid"></div>
      </div>
      <div class="dashboard-section profile-section">
        <h3 class="highlight">My Profile</h3>
        <form id="profileForm">
          <div class="profile-avatar-row">
            <img id="profileAvatar" class="profile-avatar" src="https://randomuser.me/api/portraits/men/32.jpg" alt="Avatar" />
            <input type="file" id="profileAvatarInput" accept="image/*" />
          </div>
          <div class="profile-form-group">
            <label for="profileName">Your Name</label>
            <input type="text" id="profileName" placeholder="Your Name" required />
          </div>
          <div class="profile-form-group">
            <label for="profileBio">Short Bio</label>
            <textarea id="profileBio" placeholder="Short Bio" rows="2"></textarea>
          </div>
          <div class="profile-form-group">
            <label for="profileStyles">Styles (comma separated)</label>
            <input type="text" id="profileStyles" placeholder="Styles (comma separated)" />
          </div>
          <button type="submit">Save Profile</button>
          <div id="profileMsg" class="auth-message"></div>
        </form>
      </div>
      <div class="dashboard-section messages-section">
        <h3 class="highlight">Messages</h3>
        <div class="messages-container">
          <div class="conversation-list" id="artistConvoList"></div>
          <div class="chat-window">
            <div class="chat-messages" id="artistChatMessages"></div>
            <div class="chat-input-row">
              <input type="text" class="chat-input" id="artistChatInput" placeholder="Type your message..." />
              <button class="chat-send-btn" id="artistSendBtn">Send</button>
            </div>
          </div>
        </div>
      </div>
      <div class="dashboard-section earnings-section">
        <h3 class="highlight">Earnings</h3>
        <div class="earnings-summary">
          <span class="earnings-total-label">Total Earnings:</span>
          <span class="earnings-total" id="earningsTotal">$0</span>
        </div>
        <table class="earnings-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Client</th>
              <th>Type</th>
              <th>Amount</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="earningsTableBody"></tbody>
        </table>
      </div>
    </main>
  </div>
<script>
// Upload Art Modal logic
const uploadArtModal = document.getElementById('uploadArtModal');
const openUploadArtModal = document.getElementById('openUploadArtModal');
const closeUploadArtModal = document.getElementById('closeUploadArtModal');
const uploadArtForm = document.getElementById('uploadArtForm');
const uploadArtMsg = document.getElementById('uploadArtMsg');
const portfolioGrid = document.getElementById('portfolioGrid');

function showUploadArtModal() {
  uploadArtModal.classList.remove('hidden');
  uploadArtMsg.textContent = '';
  uploadArtForm.reset();
}
function hideUploadArtModal() {
  uploadArtModal.classList.add('hidden');
}
if (openUploadArtModal) openUploadArtModal.onclick = showUploadArtModal;
if (closeUploadArtModal) closeUploadArtModal.onclick = hideUploadArtModal;
window.addEventListener('click', (e) => {
  if (e.target === uploadArtModal) hideUploadArtModal();
});

function getPortfolio() {
  return JSON.parse(localStorage.getItem('artpathPortfolio') || '[]');
}
function setPortfolio(items) {
  localStorage.setItem('artpathPortfolio', JSON.stringify(items));
}
function renderPortfolio() {
  const items = getPortfolio();
  portfolioGrid.innerHTML = items.length ? '' : '<p style="color:#bfc2d1;text-align:center;">No artworks yet.</p>';
  items.forEach((item, idx) => {
    const div = document.createElement('div');
    div.className = 'art-card';
    div.innerHTML = `<img src="${item.img}" alt="${item.title}" /><div class="art-title">${item.title}</div><div class="art-desc">${item.desc}</div><button class='delete-art-btn' data-idx='${idx}'>Delete</button>`;
    portfolioGrid.appendChild(div);
  });
  document.querySelectorAll('.delete-art-btn').forEach(btn => {
    btn.onclick = function() {
      const idx = +this.getAttribute('data-idx');
      const items = getPortfolio();
      items.splice(idx, 1);
      setPortfolio(items);
      renderPortfolio();
    };
  });
}
renderPortfolio();

uploadArtForm.onsubmit = (e) => {
  e.preventDefault();
  uploadArtMsg.textContent = '';
  const file = document.getElementById('artImage').files[0];
  const title = document.getElementById('artTitle').value.trim();
  const desc = document.getElementById('artDesc').value.trim();
  if (!file || !title || !desc) {
    uploadArtMsg.textContent = 'Please fill in all fields.';
    return;
  }
  const reader = new FileReader();
  reader.onload = function(evt) {
    const img = evt.target.result;
    const items = getPortfolio();
    items.unshift({ img, title, desc });
    setPortfolio(items);
    renderPortfolio();
    uploadArtMsg.textContent = 'Artwork uploaded!';
    setTimeout(hideUploadArtModal, 900);
  };
  reader.readAsDataURL(file);
};

// Messaging system (demo, localStorage)
const artistConvoList = document.getElementById('artistConvoList');
const artistChatMessages = document.getElementById('artistChatMessages');
const artistChatInput = document.getElementById('artistChatInput');
const artistSendBtn = document.getElementById('artistSendBtn');

const ARTIST_USER = getUser() || 'Artist';
const ARTIST_CONVOS_KEY = 'artpathArtistConvos';
const ARTIST_MSGS_KEY = 'artpathArtistMsgs';

function getArtistConvos() {
  return JSON.parse(localStorage.getItem(ARTIST_CONVOS_KEY) || '[{"name":"Jamie"},{"name":"Morgan"},{"name":"Taylor"}]');
}
function setArtistConvos(convos) {
  localStorage.setItem(ARTIST_CONVOS_KEY, JSON.stringify(convos));
}
function getArtistMsgs() {
  return JSON.parse(localStorage.getItem(ARTIST_MSGS_KEY) || '{}');
}
function setArtistMsgs(msgs) {
  localStorage.setItem(ARTIST_MSGS_KEY, JSON.stringify(msgs));
}
let currentConvo = getArtistConvos()[0]?.name || '';
function renderArtistConvos() {
  const convos = getArtistConvos();
  artistConvoList.innerHTML = '';
  convos.forEach(c => {
    const div = document.createElement('div');
    div.className = 'conversation' + (c.name === currentConvo ? ' active' : '');
    div.textContent = 'Client: ' + c.name;
    div.onclick = () => { currentConvo = c.name; renderArtistConvos(); renderArtistMsgs(); };
    artistConvoList.appendChild(div);
  });
}
function renderArtistMsgs() {
  const msgs = getArtistMsgs()[currentConvo] || [];
  artistChatMessages.innerHTML = '';
  msgs.forEach(m => {
    const div = document.createElement('div');
    div.className = 'message ' + (m.from === ARTIST_USER ? 'from-me' : 'from-them');
    div.textContent = m.text;
    artistChatMessages.appendChild(div);
  });
  artistChatMessages.scrollTop = artistChatMessages.scrollHeight;
}
artistSendBtn.onclick = sendArtistMsg;
artistChatInput.onkeydown = e => { if (e.key === 'Enter') sendArtistMsg(); };
function sendArtistMsg() {
  const text = artistChatInput.value.trim();
  if (!text) return;
  const msgs = getArtistMsgs();
  msgs[currentConvo] = msgs[currentConvo] || [];
  msgs[currentConvo].push({ from: ARTIST_USER, text });
  setArtistMsgs(msgs);
  artistChatInput.value = '';
  renderArtistMsgs();
}
renderArtistConvos();
renderArtistMsgs();

// Profile setup/edit logic
const profileForm = document.getElementById('profileForm');
const profileAvatar = document.getElementById('profileAvatar');
const profileAvatarInput = document.getElementById('profileAvatarInput');
const profileName = document.getElementById('profileName');
const profileBio = document.getElementById('profileBio');
const profileStyles = document.getElementById('profileStyles');
const profileMsg = document.getElementById('profileMsg');

const PROFILE_KEY = 'artpathArtistProfile';
function getProfile() {
  return JSON.parse(localStorage.getItem(PROFILE_KEY) || '{}');
}
function setProfile(p) {
  localStorage.setItem(PROFILE_KEY, JSON.stringify(p));
}
function renderProfile() {
  const p = getProfile();
  profileAvatar.src = p.avatar || 'https://randomuser.me/api/portraits/men/32.jpg';
  profileName.value = p.name || '';
  profileBio.value = p.bio || '';
  profileStyles.value = p.styles || '';
}
profileAvatarInput.onchange = function() {
  const file = this.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(evt) {
    profileAvatar.src = evt.target.result;
  };
  reader.readAsDataURL(file);
};
profileForm.onsubmit = function(e) {
  e.preventDefault();
  const p = {
    avatar: profileAvatar.src,
    name: profileName.value.trim(),
    bio: profileBio.value.trim(),
    styles: profileStyles.value.trim()
  };
  setProfile(p);
  profileMsg.textContent = 'Profile saved!';
  setTimeout(() => { profileMsg.textContent = ''; }, 1200);
};
renderProfile();

// Earnings summary/history (demo)
const earningsTotal = document.getElementById('earningsTotal');
const earningsTableBody = document.getElementById('earningsTableBody');
const EARNINGS_KEY = 'artpathEarnings';
function getEarnings() {
  return JSON.parse(localStorage.getItem(EARNINGS_KEY) || '[{"date":"2024-06-01","client":"Jamie","type":"Portrait","amount":100,"status":"Paid"},{"date":"2024-05-28","client":"Morgan","type":"Landscape","amount":200,"status":"Paid"},{"date":"2024-05-20","client":"Taylor","type":"Anime Style","amount":80,"status":"Pending"}]');
}
function setEarnings(items) {
  localStorage.setItem(EARNINGS_KEY, JSON.stringify(items));
}
function renderEarnings() {
  const items = getEarnings();
  const total = items.filter(e => e.status === 'Paid').reduce((sum, e) => sum + e.amount, 0);
  earningsTotal.textContent = `$${total}`;
  earningsTableBody.innerHTML = items.map(e => `<tr><td>${e.date}</td><td>${e.client}</td><td>${e.type}</td><td>$${e.amount}</td><td><span class="status ${e.status.toLowerCase()}">${e.status}</span></td></tr>`).join('');
}
renderEarnings();
</script>
</body>
</html> 